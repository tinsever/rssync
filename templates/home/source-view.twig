{% extends 'layout/base.twig' %}

{% block title %}{{ source.name }} - {{ app_name }}{% endblock %}

{% block content %}
<div class="page-header">
    <div class="row valign-wrapper" style="margin-bottom: 0;">
        <div class="col s12 m8">
            <h4>{{ source.name }}</h4>
            {% if source.category %}
                <p class="grey-text">
                    <i class="material-icons tiny">folder</i> {{ source.category.name }}
                </p>
            {% endif %}
        </div>
        <div class="col s12 m4 right-align">
            <a href="{{ source.url }}" target="_blank" class="btn waves-effect waves-light orange">
                <i class="material-icons left">rss_feed</i>RSS-Feed Ã¶ffnen
            </a>
        </div>
    </div>
</div>

<div class="card">
    <div class="card-content">
        <h5 class="card-title">
            <i class="material-icons left blue-text">info</i>
            Informationen
        </h5>
        
        <div class="row" style="margin-top: 1.5rem;">
            {% if feedDescription %}
            <div class="col s12" style="margin-bottom: 1.5rem;">
                <strong>Beschreibung:</strong>
                <p style="margin-top: 0.5rem; color: #616161;">{{ feedDescription }}</p>
            </div>
            {% endif %}
            
            {% if authors is not empty %}
            <div class="col s12 m6" style="margin-bottom: 1.5rem;">
                <strong>Autoren:</strong>
                <div style="margin-top: 0.5rem;">
                    {% for author in authors %}
                        <span class="chip" style="margin: 0.25rem 0.25rem 0.25rem 0;">{{ author }}</span>
                    {% endfor %}
                </div>
            </div>
            {% endif %}
            
            {% if feedCategories is not empty %}
            <div class="col s12 m6" style="margin-bottom: 1.5rem;">
                <strong>Kategorien:</strong>
                <div style="margin-top: 0.5rem;">
                    {% for category in feedCategories %}
                        <span class="chip" style="margin: 0.25rem 0.25rem 0.25rem 0;">{{ category }}</span>
                    {% endfor %}
                </div>
            </div>
            {% endif %}
            
            {% if source.category %}
            <div class="col s12 m6" style="margin-bottom: 1.5rem;">
                <strong>Zuordnung:</strong>
                <p style="margin-top: 0.5rem; color: #616161;">
                    <i class="material-icons tiny">folder</i> {{ source.category.name }}
                </p>
            </div>
            {% endif %}
            
            {% if source.last_refresh %}
            <div class="col s12 m6" style="margin-bottom: 1.5rem;">
                <strong>Zuletzt aktualisiert:</strong>
                <p style="margin-top: 0.5rem; color: #616161;">
                    {% set berlin_time = source.last_refresh|date('Y-m-d H:i:s', timezone)|date('d.m.Y H:i') %}
                    <i class="material-icons tiny">schedule</i> {{ berlin_time|split(' ')|first }} um {{ berlin_time|split(' ')|last }} Uhr
                </p>
            </div>
            {% else %}
            <div class="col s12 m6" style="margin-bottom: 1.5rem;">
                <strong>Zuletzt aktualisiert:</strong>
                <p style="margin-top: 0.5rem; color: #ff9800;">
                    <i class="material-icons tiny">warning</i> Noch nicht aktualisiert
                </p>
            </div>
            {% endif %}
        </div>
    </div>
</div>

<div class="center-align" style="margin-top: 2rem;">
    <a href="{{ url_for('public.sources') }}" class="btn-flat waves-effect">
        <i class="material-icons left">arrow_back</i>Alle Quellen
    </a>
</div>
{% endblock %}

